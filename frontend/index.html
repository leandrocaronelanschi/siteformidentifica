<!DOCTYPE html>
<html lang="pt-br">
<body>
    <h2>Entre em Contato</h2>
    <form id="meu-formulario">
    <label for="nome_completo">Nome Completo:</label><br>
    <input type="text" id="nome_completo" name="nome_completo" required><br><br>

    <label for="email">E-mail:</label><br>
    <input type="email" id="email" name="email" required><br><br>

    <label for="telefone">Telefone:</label><br>
    <input type="tel" id="telefone" name="telefone" required><br><br>

    <hr>
    <h3>Arquivos:</h3>

    <label for="cnh">CNH (frente e verso em um único arquivo):</label><br>
    <input type="file" id="cnh" name="cnh" required><br><br>

    <label for="contrato_social">Contrato Social (pode enviar até 10 arquivos):</label><br>
    <input type="file" id="contrato_social" name="contrato_social" multiple><br><br>

    <label for="cartao_cnpj">Cartão de CNPJ:</label><br>
    <input type="file" id="cartao_cnpj" name="cartao_cnpj" required><br><br> 

    <button type="submit">Enviar Cadastro</button>
</form>

<div id="status"></div>
    <div id="status"></div>

    <script>
        const form = document.getElementById('meu-formulario');
        const statusDiv = document.getElementById('status');

        form.addEventListener('submit', async function(event) {
            event.preventDefault();
            statusDiv.innerText = 'Enviando...';
            
            // FormData é essencial para enviar arquivos
            const formData = new FormData(form);

            try {
                const response = await fetch('http://localhost:3000/enviar-email', {
                    method: 'POST',
                    body: formData, // Não defina o 'Content-Type', o navegador fará isso
                });

                if (response.ok) {
                    statusDiv.innerText = 'E-mail enviado com sucesso!';
                    form.reset();
                } else {
                    statusDiv.innerText = 'Ocorreu um erro ao enviar.';
                }
            } catch (error) {
                 statusDiv.innerText = 'Ocorreu um erro de rede.';
            }
        });
    </script>
</body>
</html>